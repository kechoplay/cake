<?php
namespace App\Controller;

use Cake\Core\Configure;
use Cake\Event\Event;
use Cake\ORM\TableRegistry;

class HomeController extends AppController
{
    public function initialize()
    {
        parent::initialize(); // TODO: Change the autogenerated stub
        $this->viewBuilder()->setLayout('default2');
        $this->_articleTbl=TableRegistry::get('articles');
        $this->_categorysTbl=TableRegistry::get('categories');
    }

    public function index()
    {
        $parent=$this->_categorysTbl->getParent();


        $lstCategory=$this->_categorysTbl->treeListCategory();
        foreach ($lstCategory as $cat){
            var_dump($cat);
            die();
        }

//        $chil=$this->_categorysTbl->getChild($value['cat_id']);
        $article=$this->_articleTbl->showCategory();
        $this->set(compact('article'));
        $this->set(compact('parent'));
        $this->set(compact('getca'));
        $this->set(compact('lstCategory'));
    }
}
?>